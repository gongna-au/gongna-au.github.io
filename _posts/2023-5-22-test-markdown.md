---
layout: post
title:  COCOMO模型/判断覆盖/条件覆盖/估算功能点
subtitle:
tags: [软件测试]
comments: true
---
## 1.测试方法
```go
if (x > 0) {
    // 正数分支
} else if (x == 0) {
    // 零分支
} else {
    // 负数分支
}
```

```go
switch (dayOfWeek) {
    case 1:
        // 星期一
        break;
    case 2:
        // 星期二
        break;
    case 3:
        // 星期三
        break;
    // ...
    default:
        // 未知的星期
        break;
}
```


### 判定覆盖（Decision Coverage）

判定覆盖要求测试用例覆盖所有可能的分支。对于给定的 switch 语句和 if-else 语句，我们需要确保每个 case 和每个条件分支都至少执行一次。

```java
dayOfWeek = 1，覆盖了 "星期一" 分支
dayOfWeek = 2，覆盖了 "星期二" 分支
dayOfWeek = 3，覆盖了 "星期三" 分支
dayOfWeek 为其他有效值（如 4、5、6、7），覆盖其他 "星期" 分支（已省略）
dayOfWeek 为无效值（如 0、8 或 -1），覆盖 "未知的星期" 分支
```

以下是针对 if-else 语句的测试用例：
```java
x > 0，覆盖了 "正数分支"
x == 0，覆盖了 "零分支"
x < 0，覆盖了 "负数分支"
```

### 条件覆盖

条件覆盖要求测试用例覆盖所有可能的条件结果，即条件为真和条件为假的情况。对于给定的 switch 语句和 if-else 语句，我们需要考虑所有可能的条件结果。

对于 switch 语句，条件覆盖和判定覆盖的设计是相同的，因为 switch 语句的每个 case 都是一个独立的条件。

对于 if-else 语句，以下是针对条件覆盖的测试用例：
```java
x > 0 为真，覆盖了 "正数分支"
x > 0 为假，但 x == 0 为真，覆盖了 "零分支"
x > 0 为假，且 x == 0 为假，覆盖了 "负数分支"
```

### 设计测试用例？


#### 判定分支的测试用例设计
针对每个 case 子句，至少设计一个测试用例，使得程序能够执行该分支中的代码块。对于多个判定条件的情况，需要设计多个测试用例，以覆盖所有可能的情况。例如，在上面的代码中，可以设计以下测试用例：
```java
dayOfWeek 的值为 1：覆盖第一个判定分支。
dayOfWeek 的值为 2：覆盖第二个判定分支。
dayOfWeek 的值为 3：覆盖第三个判定分支。
dayOfWeek 的值为负数：覆盖默认分支。
```


#### 条件分支的测试用例设计

针对每个 case 子句中的条件表达式，至少设计一个测试用例，使得程序能够执行该分支中的代码块。对于**多个条件表达式**的情况，需要设计多个测试用例，以覆盖所有可能的条件取值。



```go
if (x > 0) {
    // 正数分支
} else if (x == 0) || (y==0) {
    // 零分支
} else {
    // 负数分支
}
```

条件覆盖测试，需要针对每个条件表达式的取值至少设计一个测试用例，以覆盖所有可能的情况。对于 (x == 0) || (y==0) 这个整体条件表达式，我们需要分别测试其为真和为假的情况，因此需要设计两个测试用例。具体来说，可以设计以下测试用例：

```java
x 的值为 1，y 的值为 0：覆盖正数分支，以及 (x == 0) || (y==0) 为假的情况。
x 的值为 0，y 的值为 1：覆盖零分支，以及 (x == 0) || (y==0) 为真的情况。
x 的值为 -1，y 的值为 0：覆盖负数分支，以及 (x == 0) || (y==0) 为假的情况。
x 的值为 0，y 的值为 0：覆盖零分支，以及 (x == 0) || (y==0) 为真的情况。
```

分支覆盖测试中，我们只需要设计一个测试用例，覆盖整体条件表达式为真和为假的情况，以保证所有分支都至少被执行一次。具体来说，可以设计以下测试用例：
```java
x 的值为 1，y 的值为 0：覆盖正数分支，以及整体条件表达式为真的情况。
x 的值为 -1，y 的值为 0：覆盖负数分支，以及整体条件表达式为假的情况。
```

## 2.成本估算

假设我们有一个需要开发新软件系统的项目，目标代码行数为10,000行。我们想使用COCOMO模型来估算该项目的工作量和时间。

### 基本COCOMO模型
基本COCOMO模型根据软件系统的大小估算项目所需的工作量。基本COCOMO模型的公式为：
```text
E = a * (KLOC)^b
```
其中，E是以人月为单位的工作量，KLOC是以千行代码为单位的软件系统大小，a和b是依赖于正在开发的项目类型的常数。

对于我们的项目，我们将假设a = 2.4，b = 1.05，这是基本COCOMO模型中半独立项目的默认值。使用这些值，我们可以估算出项目所需的工作量：
```text
E = 2.4 * (10)^1.05 = 29.5人月
```
### 中级COCOMO模型
中级COCOMO模型通过考虑影响项目工作量的各种因素来扩展基本模型。这些因素分为五个类别：产品、平台、人员、项目和过程。每个类别都有一组成本驱动因素，影响项目所需的工作量。

为了使用中级COCOMO模型，我们需要根据每个类别的成本驱动因素计算出一个工作量调整因子（EAF）。中级COCOMO模型的公式为：
```text
E = a * (KLOC)^b * EAF
```
其中，EAF是每个类别的成本驱动因素的乘积。成本驱动因素在非常低、低、标准、高和非常高的等级上进行评级。

对于我们的项目，假设每个类别的成本驱动因素的评级如下：

产品：标准
平台：高
人员：高
项目：标准
过程：高
使用这些成本驱动因素的评级，我们可以计算出EAF如下：
```text
EAF = 0.91 * 1.16 * 1.10 * 1.00 * 0.90 = 0.94
```
其中，0.91、1.16、1.10、1.00和0.90分别是产品、平台、人员、项目和过程类别的EAF值。

现在，我们可以使用中级COCOMO模型的公式来估算项目所需的工作量：
```text
E = 2.4 * (10)^1.05 * 0.94 = 27.8人月
```
### 详细COCOMO模型
详细COCOMO模型是COCOMO模型中最复杂的版本，它考虑了软件开发过程的具体特性，如需求分析和设计阶段。详细COCOMO模型根据软件系统的大小和开发过程的特定特性估算项目所需的工作量。

为了使用详细COCOMO模型，我们需要根据开发过程的每个阶段的成本驱动因素计算出一个工作量调整因子（EAF）。详细COCOMO模型的公式为：
```text
E = a *(KLOC)^b * EAF
```
其中，EAF是每个开发过程阶段的成本驱动因素的乘积。

对于我们的项目，假设每个开发过程阶段的成本驱动因素的评级如下：

需求分析：标准
系统设计：高
详细设计：高
编码和测试：非常高
使用这些成本驱动因素的评级，我们可以计算出EAF如下：

EAF = 0.98 * 1.15 * 1.15 * 1.30 = 1.73

其中，0.98、1.15、1.15和1.30分别是需求分析、系统设计、详细设计和编码和测试阶段的EAF值。

现在，我们可以使用详细COCOMO模型的公式来估算项目所需的工作量：
```text
E = 2.4 * (10)^1.05 * 1.73 = 47.8人月
```
正如您所看到的，与基本和中级模型相比，详细COCOMO模型估算出的项目所需工作量要高得多。这是因为详细模型考虑了开发过程的具体特性，这些特性可能会对所需的工作量产生重大影响。

除了估算工作量外，COCOMO模型还可以用于估算项目的时间，方法是将工作量除以参与项目的开发人员数量。例如，如果我们假设项目将由两个开发人员完成，那么项目的时间将是：
```text
D = E / P = 47.8 / 2 = 23.9个月
```
其中，D是以月为单位的项目时间，E是以人月为单位的工作量，P是参与项目的开发人员数量。



## 3. 面向功能的度量
面向功能的度量方法来估算软件开发项目的功能点。

假设我们正在开发一个在线商城网站，需要估算该项目的功能点。我们可以根据上述定义，将应用程序提供的功能和数据分为以下五个类别进行计数：

外部输入数(EI)：假设我们的在线商城网站允许用户在网站上注册、登录，添加商品到购物车等操作。我们可以将这些操作视为外部输入，假设我们有20个外部输入。

外部输出数(EO)：假设我们的在线商城网站可以生成订单、发送邮件等操作，我们可以将这些操作视为外部输出，假设我们有15个外部输出。

外部查询数(EQ)：假设我们的在线商城网站可以根据用户提供的搜索条件搜索商品，我们可以将这些操作视为外部查询，假设我们有10个外部查询。

内部逻辑文件数(ILF)：假设我们的在线商城网站需要维护用户的个人信息、订单信息、商品信息等数据，这些数据可以视为内部逻辑文件，假设我们有5个内部逻辑文件。

外部接口文件数(EIF)：假设我们的在线商城网站需要与支付宝、微信支付等第三方支付平台进行集成，这些支付平台提供的数据可以视为外部接口文件，假设我们有3个外部接口文件。

根据上述计数，我们可以使用以下公式来计算功能点：
```
F = 总计 × [0.65 + 0.01 × (EI + EO + EQ + ILF + EIF)]
```
其中，总计是所有加权计数的总和。每个计数都有一个特定的复杂度等级，可以根据实际情况进行赋值。在这里，我们假设每个计数的复杂度等级为中等（即权重为1），则总计为53。

将上述值代入公式中，我们可以得到：

F = 53 × [0.65 + 0.01 × (20 + 15 + 10 + 5 + 3)] = 53 × 1.53 = 81.09

因此，我们估算出该在线商城网站项目的功能点为81.09。




